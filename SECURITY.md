# 前端登录安全优化方案

## 当前实现的安全措施

### 1. 密码哈希加密
- 使用 SHA-256 对密码进行哈希处理
- 使用用户名作为盐值，增加安全性
- 密码不会以明文形式传输

### 2. 防重放攻击
- 每次请求包含时间戳（timestamp）
- 每次请求包含随机数（nonce）
- 使用签名（signature）验证请求完整性

### 3. 实现位置
- `src/utils/security.js` - 安全工具函数
- `src/views/LoginView.vue` - 登录页面使用加密

## 重要安全建议

### ⚠️ 前端加密的局限性

**重要提示**：前端加密不能完全解决安全问题，因为：
1. 加密逻辑和密钥都在客户端，可以被逆向
2. 真正的安全需要依赖 HTTPS 传输层加密
3. 密码验证应该在后端进行

### ✅ 推荐的安全措施（按优先级）

#### 1. **使用 HTTPS（最重要）**
- 确保所有 API 请求都通过 HTTPS
- 这是最基础也是最重要的安全措施
- 可以防止中间人攻击和数据窃听

```javascript
// 确保 API_BASE_URL 使用 https://
VITE_API_BASE_URL=https://your-domain.com
```

#### 2. **后端密码验证**
- 后端应该使用 bcrypt、argon2 等安全的哈希算法
- 不要在前端进行密码验证
- 后端应该验证时间戳和 nonce，防止重放攻击

#### 3. **添加验证码**
- 防止暴力破解攻击
- 可以使用图形验证码或 reCAPTCHA

#### 4. **请求频率限制**
- 后端应该限制登录请求频率
- 防止暴力破解和 DDoS 攻击

#### 5. **Token 安全**
- 使用 HttpOnly Cookie 存储 token（更安全）
- 或使用短期 token + refresh token 机制
- Token 应该有过期时间

#### 6. **CORS 配置**
- 后端应该正确配置 CORS
- 只允许信任的域名访问

## 当前实现说明

### 请求格式
```json
{
  "username": "admin",
  "password_hash": "sha256哈希值",
  "timestamp": 1234567890,
  "nonce": "随机字符串",
  "signature": "请求签名"
}
```

### 后端需要做的处理
1. 验证时间戳（防止过期请求，建议 5 分钟内有效）
2. 验证 nonce（防止重放攻击，可以使用 Redis 存储已使用的 nonce）
3. 验证签名
4. 使用 bcrypt 等算法验证密码哈希

## 进一步优化建议

### 1. 使用 RSA 非对称加密（更安全）
如果需要更强的安全性，可以考虑：
- 后端提供 RSA 公钥
- 前端使用公钥加密密码
- 后端使用私钥解密

### 2. 使用 OAuth 2.0
- 使用标准的 OAuth 2.0 认证流程
- 更安全，更标准化

### 3. 双因素认证（2FA）
- 添加短信验证码或 TOTP
- 提高账户安全性

## 注意事项

1. **不要在前端存储敏感信息**
2. **定期更新依赖包**，修复安全漏洞
3. **使用 CSP（Content Security Policy）**，防止 XSS 攻击
4. **定期进行安全审计**
